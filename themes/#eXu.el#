;;; exu-theme.el --- Exu theme

(deftheme exu
  "Reimplements your Neovim color scheme in Emacs.")

;; Color table (alist)
(defvar exu-colors
  '(
    ;; exu def colors
    (exu_pink           . "#FF67AB")
    (exu_pink_accent1   . "#F00167")
    (exu_pink_accent2   . "#D12F55")
    (exu_yellow         . "#FFDF40")

    ;; rare exu
    (exu_dim_pink       . "#C83872")     ;; used for (cursor) lines / bars
    (exu_orange_light   . "#D19A66")     ;; used for bg
    (exu_orange         . "#ED997D")     ;; used for bg & strings
    (exu_orange_accent1 . "#FF8700")
    (exu_orange_accent2 . "#FF8020")

    ;; common colors
    (red                . "#e86671")
    (bred               . "#CC0C0C")
    (bgreen             . "#10E010")
    (bgreen2            . "#60DC60")
    (bcyan              . "#1FCFF1")
    (cyan               . "#56b6c2")
    (black              . "#000000")
    (white              . "#FFFFFF")
    (lpurple            . "#c895c8") ;; linenr, indent etc
    (dim_purple         . "#784f78") ;; inactive line
    (dim_viol           . "#a884e0") ;; comment
    (blue               . "#65D1FF")
    (lblue              . "#5788FF")
    (bg_lred            . "#442533") ;; sometimes used for current line

    ;; Backgrounds
    (bg_main            . "#020E16")
    (bg_dark            . "#1E2836") ;; used for bars
    (bg_light           . "#181830") ;; used for CurLine and lines in editor
    (bg_hover           . "#072337") ;; main bg for popups
    (bg_sec             . "#16202B") ;; bg for occasions
    (bg_purple          . "#451020") ;; sometimes used for pop-ups
    (bg_dark_purple     . "#321932") ;; idk for what it was used

    ;; some grey
    (grey               . "#909090")  ;; gray in the info sec
    (grey_text          . "#64C4FF")  ;; grey for text
    (grey1              . "#AAAAAA")
    (grey2              . "#CACACA")
    ))

(defun exu-get (name)
  "Return the hex color string associated with NAME from `exu-colors'."
  (cdr (assoc name exu-colors)))

(defmacro exu-with-all-colors (&rest body)
  "Bind all colors from `exu-colors` as variables.
Each key is bound to its corresponding hex value."
  (let ((bindings (mapcar (lambda (pair)
                            (list (car pair) `(exu-get ',(car pair))))
                          exu-colors)))
    `(let ,bindings ,@body)))

;; Define the theme faces using our color bindings.
(exu-with-colors
 (custom-theme-set-faces
  'exu

  ;; --------------------------------------------------------------------------
  ;; Basic Editor Colors
  ;; --------------------------------------------------------------------------
  `(default                         ((t (:foreground ,fg :background ,bg :family "default"))))
  `(cursor                          ((t (:background ,dim_pink))))
  `(fringe                          ((t (:background ,bg))))
  `(region                          ((t (:background ,bg_light :foreground ,fg :slant italic))))
  `(highlight                       ((t (:background ,bg_light))))
  `(vertical-border                 ((t (:foreground ,dim_pink :background nil))))
  `(line-number                     ((t (:foreground ,lpurple :background ,bg))))
  `(line-number-current-line        ((t (:foreground ,dim_pink :background ,bg_light))))

  ;; Mode line
  `(mode-line                       ((t (:foreground ,fg :background ,bg_dark :box (:line-width -1 :color ,bg_dark)))))
  `(mode-line-inactive              ((t (:foreground ,dim_purp :background ,bg :box (:line-width -1 :color ,bg)))))

  ;; Tab line (Emacs 27+)
  `(tab-line                        ((t (:foreground ,fg :background ,bg_dark))))
  `(tab-line-tab                    ((t (:background ,bg_dark :foreground ,fncolor :box (:line-width 1 :color ,dim_pink)))))
  `(tab-line-tab-inactive          ((t (:background ,bg :foreground ,comment :box (:line-width 1 :color ,dim_pink)))))
  `(tab-line-highlight              ((t (:background ,bg_light :foreground ,fg))))
  `(tab-line-close-highlight        ((t (:foreground ,red :background ,bg_dark))))

  ;; --------------------------------------------------------------------------
  ;; Syntax Highlighting (font-lock)
  ;; --------------------------------------------------------------------------
  `(font-lock-comment-face          ((t (:foreground ,comment :slant italic))))
  `(font-lock-comment-delimiter-face ((t (:inherit font-lock-comment-face))))
  `(font-lock-doc-face             ((t (:inherit font-lock-comment-face))))
  `(font-lock-string-face          ((t (:foreground ,string :slant italic))))
  `(font-lock-keyword-face         ((t (:foreground ,keyword))))
  `(font-lock-function-name-face   ((t (:foreground ,fncolor))))
  `(font-lock-type-face            ((t (:foreground ,typec))))
  `(font-lock-variable-name-face   ((t (:foreground ,fg))))
  `(font-lock-constant-face        ((t (:foreground ,constc :slant italic))))
  `(font-lock-builtin-face         ((t (:foreground ,keyword :slant italic))))
  `(font-lock-operator-face        ((t (:foreground ,fg))))
  `(font-lock-warning-face         ((t (:foreground ,borange :weight bold))))

  ;; --------------------------------------------------------------------------
  ;; LSP / Diagnostic / Flycheck-like faces
  ;; --------------------------------------------------------------------------
  `(lsp-face-highlight-textual
    ((t (:background ,bg_light :foreground ,fg))))
  `(lsp-face-error
    ((t (:foreground ,bcyan :weight bold))))
  `(lsp-face-error-background
    ((t (:background ,constc :foreground ,bg :slant italic))))
  `(lsp-face-warning
    ((t (:foreground ,borange :slant italic))))
  `(lsp-face-warning-background
    ((t (:background ,borange :foreground ,bg))))
  `(lsp-face-info
    ((t (:foreground ,red :slant italic))))
  `(lsp-face-hint
    ((t (:foreground ,grey :slant italic))))
  `(flycheck-error   ((t (:foreground ,bcyan   :underline (:style wave :color ,bcyan)))))
  `(flycheck-warning ((t (:foreground ,borange :underline (:style wave :color ,borange)))))
  `(flycheck-info    ((t (:foreground ,red     :underline (:style wave :color ,red)))))

  ;; --------------------------------------------------------------------------
  ;; Matching Delimiters, Parens, Search
  ;; --------------------------------------------------------------------------
  `(show-paren-match                  ((t (:foreground ,black :background ,borange :weight bold))))
  `(show-paren-mismatch               ((t (:foreground ,white :background ,red :weight bold))))
  `(isearch                           ((t (:background ,dim_pink :foreground ,black :slant italic))))
  `(lazy-highlight                    ((t (:background ,bg_light :foreground ,fncolor))))

  ;; --------------------------------------------------------------------------
  ;; Popup Menus (Vertico, Corfu, etc.)
  ;; --------------------------------------------------------------------------
  `(vertico-current                   ((t (:background ,bg_dark_purple :foreground ,fg :underline t))))
  `(vertico-multiline                 ((t (:foreground ,dim_pink :slant italic))))
  `(exu-accent-face                   ((t (:foreground "#FFFF00" :weight bold :slant italic))))
  `(corfu-default                     ((t (:background ,bg_hover :foreground ,fg))))
  `(corfu-current                     ((t (:background ,bg_purple :foreground ,white :underline t :weight bold))))
  `(corfu-border                      ((t (:background ,bg_dark_purple))))

  ;; --------------------------------------------------------------------------
  ;; Additional custom faces
  ;; --------------------------------------------------------------------------
  `(exu-diff-added                    ((t (:foreground ,(exu-get 'bgreen) :background nil))))
  `(exu-diff-removed                  ((t (:foreground ,red :background nil))))
  `(exu-diff-changed                  ((t (:foreground ,keyword :background nil))))
  ))

(provide-theme 'exu)

;;; exu-theme.el ends here
