;; create telescope-root and place there telescope-promt telecope-preview and telescope-results 

(let* ((parent (selected-frame))
       ;; Get parent's dimensions in pixels.
       (parent-width-pixels (frame-pixel-width parent))
       (parent-height-pixels (frame-pixel-height parent))
       ;; Compute desired child dimensions in pixels.
       (child-width-pixels (* 0.8 parent-width-pixels))
       (child-height-pixels (* 0.9 parent-height-pixels))
       ;; Convert pixel dimensions to character columns/lines.
       (char-width (frame-char-width parent))
       (char-height (frame-char-height parent))
       (child-width-chars (max 1 (floor (/ child-width-pixels char-width))))
       (child-height-lines (max 1 (floor (/ child-height-pixels char-height))))
       ;; Compute offsets (15% from left and top).
       (child-left (round (* 0.1 parent-width-pixels)))
       (child-top (round (* 0.05 parent-height-pixels)))
       (telescope-root
        (make-frame `((parent-frame . ,parent)
                      (title . "telescope-root")
                      (left . ,child-left)
                      (top . ,child-top)
                      (width . ,child-width-chars)
                      (height . ,child-height-lines)
                      (border-width . 5)
                      (visibility . t)
                      (no-accept-focus . nil)
                      (undecorated . nil)
                      (keep-ratio . t))))
       (telescope-window (frame-root-window telescope-root)))
  (select-frame-set-input-focus telescope-root)
(when (fboundp 'vterm)
    (let ((child-frame telescope-root))
      (with-current-buffer (vterm)
        (setq kill-buffer-query-functions nil) ;; exit confirm disable
        ;; TODO exiting after the vterm is closed
        (set-window-buffer telescope-window (current-buffer))))))
